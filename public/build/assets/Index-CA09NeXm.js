import{r as f,q as _,k as b,a as e,c as o,d as h,b as y,e as i,v as T,i as A,m as a,F as k,x as C,t as n,j as I,l as D,g as d,s as q,z as O}from"./app-DEf1IR0b.js";import{A as B}from"./AppLayout-jejGCWhL.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const L={class:"filters-bar"},M={class:"search-box"},V={class:"filter-group"},S={key:0,class:"filter-group"},w=["value"],j={class:"table-container"},G={class:"data-table"},H={class:"cliente-info"},R={key:0},U={key:1},z={class:"amount"},$={key:0,class:"badge badge-info"},Z={key:1,class:"badge badge-secondary"},J={key:0},K={key:1,class:"text-muted"},Q={key:1,class:"text-muted"},W={key:0},X={key:0,class:"pagination"},Y={__name:"Index",props:{pagos:Object,clientes:Array,filters:Object},setup(r){const u=r,c=f(u.filters.search||""),p=f(u.filters.estado||""),m=f(u.filters.cliente||""),g=()=>{O.get("/pagos",{search:c.value,estado:p.value,cliente:m.value},{preserveState:!0,preserveScroll:!0,replace:!0})},E=((l,s)=>{let t;return(...v)=>{clearTimeout(t),t=setTimeout(()=>l(...v),s)}})(()=>{g()},300),N=l=>({PENDIENTE:"warning",PAGADO:"success",CANCELADO:"danger",RECHAZADO:"danger"})[l]||"secondary",x=l=>new Intl.NumberFormat("es-BO").format(l||0),P=l=>l?new Date(l).toLocaleString("es-BO"):"-";return(l,s)=>(a(),_(B,null,{default:b(()=>[s[12]||(s[12]=e("div",{class:"page-header"},[e("h1",null,"ðŸ’° GestiÃ³n de Pagos")],-1)),e("div",L,[e("div",M,[y(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),type:"text",placeholder:"Buscar por transacciÃ³n o cÃ³digo...",onInput:s[1]||(s[1]=(...t)=>i(E)&&i(E)(...t))},null,544),[[T,c.value]])]),e("div",V,[y(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>p.value=t),onChange:g},[...s[4]||(s[4]=[e("option",{value:""},"Todos los estados",-1),e("option",{value:"PENDIENTE"},"Pendiente",-1),e("option",{value:"PAGADO"},"Pagado",-1),e("option",{value:"CANCELADO"},"Cancelado",-1)])],544),[[A,p.value]])]),r.clientes.length>0?(a(),o("div",S,[y(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>m.value=t),onChange:g},[s[5]||(s[5]=e("option",{value:""},"Todos los clientes",-1)),(a(!0),o(k,null,C(r.clientes,t=>(a(),o("option",{key:t.id_usuario,value:t.id_usuario},n(t.nombre)+" "+n(t.apellido)+" - CI: "+n(t.ci),9,w))),128))],544),[[A,m.value]])])):h("",!0)]),e("div",j,[e("table",G,[s[11]||(s[11]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Paquete"),e("th",null,"Cliente"),e("th",null,"Monto"),e("th",null,"MÃ©todo"),e("th",null,"Estado"),e("th",null,"Fecha Pago"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(a(!0),o(k,null,C(r.pagos.data,t=>(a(),o("tr",{key:t.id_pago},[e("td",null,"#"+n(t.id_pago),1),e("td",null,[I(i(D),{href:`/paquetes/${t.id_paquete}`,class:"link-paquete"},{default:b(()=>[d(n(t.paquete?.codigo_seguimiento),1)]),_:2},1032,["href"])]),e("td",null,[e("div",H,[e("div",null,[s[6]||(s[6]=e("strong",null,"Remitente:",-1)),d(" "+n(t.paquete?.remitente?.nombre)+" "+n(t.paquete?.remitente?.apellido),1)]),t.paquete?.destinatario?(a(),o("div",R,[s[7]||(s[7]=e("strong",null,"Destinatario:",-1)),d(" "+n(t.paquete?.destinatario?.nombre)+" "+n(t.paquete?.destinatario?.apellido),1)])):(a(),o("div",U,[s[8]||(s[8]=e("strong",null,"Destinatario:",-1)),d(" "+n(t.paquete?.nombre_destinatario),1)]))])]),e("td",z,"Bs. "+n(x(t.monto_total)),1),e("td",null,[t.tipo_pago==="CREDITO"?(a(),o("span",$," ðŸ“… A Cuotas ")):(a(),o("span",Z," ðŸ’µ Contado "))]),e("td",null,[e("span",{class:q("badge badge-"+N(t.estado_pago))},n(t.estado_pago),3)]),e("td",null,[t.fecha_pago?(a(),o("span",J,n(P(t.fecha_pago)),1)):(a(),o("span",K,"Pendiente"))]),e("td",null,[t.estado_pago==="PENDIENTE"?(a(),_(i(D),{key:0,href:`/paquetes/${t.id_paquete}/pagar`,class:"btn-action btn-pay",title:"Pagar ahora"},{default:b(()=>[...s[9]||(s[9]=[d(" ðŸ’³ Pagar ",-1)])]),_:1},8,["href"])):(a(),o("span",Q,"-"))])]))),128)),r.pagos.data.length===0?(a(),o("tr",W,[...s[10]||(s[10]=[e("td",{colspan:"8",class:"empty-state"}," No se encontraron pagos registrados. ",-1)])])):h("",!0)])])]),r.pagos.links.length>3?(a(),o("div",X,[(a(!0),o(k,null,C(r.pagos.links,(t,v)=>(a(),_(i(D),{key:v,href:t.url||"#",class:q(["page-link",{active:t.active,disabled:!t.url}]),innerHTML:t.label},null,8,["href","class","innerHTML"]))),128))])):h("",!0)]),_:1}))}},ne=F(Y,[["__scopeId","data-v-d1ae6f7f"]]);export{ne as default};
