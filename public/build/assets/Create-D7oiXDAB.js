import{A as T,r as c,q as O,k,a as o,c as u,d as m,t as l,m as d,s as v,b as g,B as b,F as D,x as P,g as Q,z as I,p as N}from"./app-DEf1IR0b.js";import{A as F}from"./AppLayout-jejGCWhL.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */const B={class:"checkout-container"},A={class:"checkout-card"},M={class:"checkout-header"},U={class:"paquete-details"},j={class:"detail-grid"},w={class:"detail-item"},z={class:"value"},G={class:"detail-item"},L={class:"value"},S={class:"detail-item"},$={class:"value"},h={class:"monto-section"},H={class:"monto-display"},J={class:"amount"},K={key:0,class:"tipo-pago-section"},W={class:"tipo-pago-options"},X={key:0,class:"cuotas-section"},Y={class:"cuotas-options"},Z=["value"],oo={class:"cuota-content"},to={class:"cuota-label"},eo={class:"cuota-monto"},so={key:1,class:"metodo-cobro-section"},ao={class:"metodo-options"},no={class:"action-section"},lo=["disabled"],io={key:1,class:"action-section"},ro=["disabled"],uo={key:2,class:"qr-section"},po={class:"qr-container"},co=["src"],mo={class:"qr-instruction"},vo={__name:"Create",props:{paquete:Object,monto:Number,pagoExistente:Object,opcionesCuotas:Array},setup(s){const r=s,e=T({id_paquete:r.paquete.id_paquete,tipo_pago:r.pagoExistente?r.pagoExistente.tipo_pago:"CONTADO",numero_cuotas:3,metodo_cobro:"QR",observaciones:""}),E=c(null),i=c(!1),p=c(null);c(r.pagoExistente?r.pagoExistente.estado_pago:"PENDIENTE");const _=c(!!r.pagoExistente),f=n=>(r.monto/n).toFixed(2),q=()=>!(e.tipo_pago==="CREDITO"&&!e.numero_cuotas),y=()=>_.value?"üîÑ Actualizar M√©todo de Pago":e.metodo_cobro==="EFECTIVO"?"‚úì Registrar Cobro Manual":"‚úì Confirmar Pago",R=async()=>{i.value=!0,p.value=null;try{I.post("/pagos",e,{onSuccess:()=>{_.value=!0,e.tipo_pago==="CREDITO"&&e.metodo_cobro==="QR"||e.metodo_cobro==="QR"&&setTimeout(()=>{C()},500)},onError:n=>{p.value=Object.values(n).join(", "),i.value=!1}})}catch{p.value="Error al crear el pago",i.value=!1}},C=async()=>{i.value=!0,p.value=null;try{const n=await N.post(`/api/pagos/${r.paquete.id_paquete}/generar-qr`);n.data.success?E.value=n.data.qr:p.value=n.data.message||"Error al generar el c√≥digo QR"}catch(n){p.value=n.response?.data?.message||"Error al conectar con el servidor de pagos"}finally{i.value=!1}};return(n,t)=>(d(),O(F,null,{default:k(()=>[o("div",B,[o("div",A,[o("div",M,[t[5]||(t[5]=o("h1",null,"üí≥ Pagar Env√≠o",-1)),o("p",null,"Paquete: "+l(s.paquete.codigo_seguimiento),1)]),o("div",U,[t[9]||(t[9]=o("h3",null,"üì¶ Detalles del Env√≠o",-1)),o("div",j,[o("div",w,[t[6]||(t[6]=o("span",{class:"label"},"Remitente:",-1)),o("span",z,l(s.paquete.remitente?.nombre)+" "+l(s.paquete.remitente?.apellido),1)]),o("div",G,[t[7]||(t[7]=o("span",{class:"label"},"Destinatario:",-1)),o("span",L,l(s.paquete.nombre_destinatario),1)]),o("div",S,[t[8]||(t[8]=o("span",{class:"label"},"Ruta:",-1)),o("span",$,l(s.paquete.ruta?.origen?.nombre_destino)+" ‚Üí "+l(s.paquete.ruta?.destino?.nombre_destino),1)])])]),o("div",h,[t[11]||(t[11]=o("h3",null,"üí∞ Monto Total",-1)),o("div",H,[t[10]||(t[10]=o("span",{class:"currency"},"Bs.",-1)),o("span",J,l(s.monto.toFixed(2)),1)])]),!_.value||s.pagoExistente&&s.pagoExistente.estado_pago==="PENDIENTE"?(d(),u("div",K,[t[21]||(t[21]=o("h3",null,"üéØ Tipo de Pago",-1)),o("div",W,[o("label",{class:v(["tipo-option",{active:e.tipo_pago==="CONTADO"}])},[g(o("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=a=>e.tipo_pago=a),value:"CONTADO"},null,512),[[b,e.tipo_pago]]),t[12]||(t[12]=o("div",{class:"option-content"},[o("span",{class:"option-icon"},"üíµ"),o("span",{class:"option-label"},"Pago al Contado"),o("span",{class:"option-desc"},"Paga el total ahora")],-1))],2),o("label",{class:v(["tipo-option",{active:e.tipo_pago==="CREDITO"}])},[g(o("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=a=>e.tipo_pago=a),value:"CREDITO"},null,512),[[b,e.tipo_pago]]),t[13]||(t[13]=o("div",{class:"option-content"},[o("span",{class:"option-icon"},"üìÖ"),o("span",{class:"option-label"},"Pago a Cr√©dito"),o("span",{class:"option-desc"},"Paga en cuotas mensuales")],-1))],2)]),e.tipo_pago==="CREDITO"?(d(),u("div",X,[t[15]||(t[15]=o("h4",null,"Selecciona el n√∫mero de cuotas:",-1)),o("div",Y,[(d(!0),u(D,null,P(s.opcionesCuotas,a=>(d(),u("label",{key:a.value,class:v(["cuota-option",{active:e.numero_cuotas===a.value}])},[g(o("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=x=>e.numero_cuotas=x),value:a.value},null,8,Z),[[b,e.numero_cuotas]]),o("div",oo,[o("span",to,l(a.label),1),o("span",eo,"Bs. "+l(f(a.value)),1),t[14]||(t[14]=o("span",{class:"cuota-desc"},"por mes",-1))])],2))),128))])])):m("",!0),n.$page.props.auth.user.tipo_usuario!=="CLIENTE"?(d(),u("div",so,[t[20]||(t[20]=o("h3",null,"üí≥ M√©todo de Cobro",-1)),o("div",ao,[o("label",{class:v(["metodo-option",{active:e.metodo_cobro==="QR"}])},[g(o("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=a=>e.metodo_cobro=a),value:"QR"},null,512),[[b,e.metodo_cobro]]),t[16]||(t[16]=o("span",{class:"metodo-icon"},"üì±",-1)),t[17]||(t[17]=o("span",{class:"metodo-label"},"Generar QR (PagoF√°cil)",-1))],2),o("label",{class:v(["metodo-option",{active:e.metodo_cobro==="EFECTIVO"}])},[g(o("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=a=>e.metodo_cobro=a),value:"EFECTIVO"},null,512),[[b,e.metodo_cobro]]),t[18]||(t[18]=o("span",{class:"metodo-icon"},"üí∞",-1)),t[19]||(t[19]=o("span",{class:"metodo-label"},"Cobro en Efectivo",-1))],2)])])):m("",!0),o("div",no,[o("button",{onClick:R,disabled:i.value||!q(),class:"btn-crear-pago"},l(i.value?"‚è≥ Procesando...":y()),9,lo)])])):m("",!0),(_.value||s.pagoExistente)&&e.metodo_cobro==="QR"&&!E.value?(d(),u("div",io,[o("button",{onClick:C,disabled:i.value,class:"btn-generar-qr"},l(i.value?"‚è≥ Generando QR...":"üéØ Generar C√≥digo QR"),9,ro)])):m("",!0),E.value?(d(),u("div",uo,[t[23]||(t[23]=o("h3",null,"üì± Escanea el c√≥digo QR",-1)),o("div",po,[o("img",{src:"data:image/png;base64,"+E.value.qrBase64,alt:"C√≥digo QR de PagoF√°cil",class:"qr-image"},null,8,co)]),o("p",mo,[t[22]||(t[22]=Q(" Abre tu aplicaci√≥n de banco y escanea este c√≥digo para pagar ",-1)),o("strong",null,"Bs. "+l(s.monto.toFixed(2)),1)]),t[24]||(t[24]=o("p",{class:"expiration-note"},"Este c√≥digo expira en unas horas.",-1))])):m("",!0)])])]),_:1}))}},Co=V(vo,[["__scopeId","data-v-8f32f325"]]);export{Co as default};
